---
layout: docs

title: "google.cloud.forseti.services.inventory.inventory module"



hide:
  right_sidebar: true
---
<div class="section" id="module-google.cloud.forseti.services.inventory.inventory">
<span id="google-cloud-forseti-services-inventory-inventory-module"></span><h1>google.cloud.forseti.services.inventory.inventory module<a class="headerlink" href="#module-google.cloud.forseti.services.inventory.inventory" title="Permalink to this headline">¶</a></h1>
<p>Inventory API.</p>
<dl class="class">
<dt id="google.cloud.forseti.services.inventory.inventory.FirstMessageQueueProgresser">
<em class="property">class </em><code class="descname">FirstMessageQueueProgresser</code><span class="sig-paren">(</span><em>*args</em>, <em>**kwargs</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#FirstMessageQueueProgresser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.FirstMessageQueueProgresser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser" title="google.cloud.forseti.services.inventory.inventory.QueueProgresser"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.forseti.services.inventory.inventory.QueueProgresser</span></code></a></p>
<p>Queue base progresser</p>
<p>Only delivers first message. Then throws away all subsequent messages.
This is used to make sure that we’re not creating an internal buffer of
infinite size as we’re crawling in background without a queue consumer.</p>
<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.FirstMessageQueueProgresser._notify">
<code class="descname">_notify</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#FirstMessageQueueProgresser._notify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.FirstMessageQueueProgresser._notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify status update into queue.</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.FirstMessageQueueProgresser._notify_eof">
<code class="descname">_notify_eof</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#FirstMessageQueueProgresser._notify_eof"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.FirstMessageQueueProgresser._notify_eof" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify end of status updates into queue.</p>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.forseti.services.inventory.inventory.Inventory">
<em class="property">class </em><code class="descname">Inventory</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#Inventory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.Inventory" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Inventory API implementation.</p>
<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.Inventory.create">
<code class="descname">create</code><span class="sig-paren">(</span><em>background</em>, <em>model_name</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#Inventory.create"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.Inventory.create" title="Permalink to this definition">¶</a></dt>
<dd><p>Create a new inventory,</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>background</strong> (<em>bool</em>) – Run import in background, return immediately</li>
<li><strong>model_name</strong> (<em>str</em>) – Model name to import into</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Yields:</th><td class="field-body"><p class="first last"><em>object</em> – Yields status updates.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.Inventory.delete">
<code class="descname">delete</code><span class="sig-paren">(</span><em>inventory_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#Inventory.delete"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.Inventory.delete" title="Permalink to this definition">¶</a></dt>
<dd><p>Delete an inventory by id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>inventory_id</strong> (<em>str</em>) – Id of the inventory.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Inventory object that was deleted</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.Inventory.get">
<code class="descname">get</code><span class="sig-paren">(</span><em>inventory_id</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#Inventory.get"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.Inventory.get" title="Permalink to this definition">¶</a></dt>
<dd><p>Get inventory metadata by id.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>inventory_id</strong> (<em>str</em>) – Id of the inventory.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Inventory metadata</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.Inventory.list">
<code class="descname">list</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#Inventory.list"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.Inventory.list" title="Permalink to this definition">¶</a></dt>
<dd><p>List stored inventory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Yields:</th><td class="field-body"><em>object</em> – Inventory metadata</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.Inventory.purge">
<code class="descname">purge</code><span class="sig-paren">(</span><em>retention_days</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#Inventory.purge"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.Inventory.purge" title="Permalink to this definition">¶</a></dt>
<dd><p>Purge the gcp_inventory data that’s older than the retention days.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>retention_days</strong> (<em>string</em>) – Days of inventory tables to retain.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">Purge result.</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body">str</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.forseti.services.inventory.inventory.Progress">
<em class="property">class </em><code class="descname">Progress</code><span class="sig-paren">(</span><em>final_message=False</em>, <em>step=''</em>, <em>inventory_index_id=''</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#Progress"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.Progress" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Progress state.</p>
</dd></dl>

<dl class="class">
<dt id="google.cloud.forseti.services.inventory.inventory.QueueProgresser">
<em class="property">class </em><code class="descname">QueueProgresser</code><span class="sig-paren">(</span><em>queue</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#QueueProgresser"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.forseti.services.inventory.inventory.Progress" title="google.cloud.forseti.services.inventory.inventory.Progress"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.forseti.services.inventory.inventory.Progress</span></code></a></p>
<p>Queue based progresser.</p>
<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.QueueProgresser._notify">
<code class="descname">_notify</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#QueueProgresser._notify"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser._notify" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify status update into queue.</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.QueueProgresser._notify_eof">
<code class="descname">_notify_eof</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#QueueProgresser._notify_eof"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser._notify_eof" title="Permalink to this definition">¶</a></dt>
<dd><p>Notify end of status updates into queue.</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.QueueProgresser.get_summary">
<code class="descname">get_summary</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#QueueProgresser.get_summary"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser.get_summary" title="Permalink to this definition">¶</a></dt>
<dd><p>Indicate end of updates, and return self as last state.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">Progresser in its last state.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.QueueProgresser.on_error">
<code class="descname">on_error</code><span class="sig-paren">(</span><em>error</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#QueueProgresser.on_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser.on_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the error and updates the counter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>error</strong> (<em>str</em>) – error message</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.QueueProgresser.on_new_object">
<code class="descname">on_new_object</code><span class="sig-paren">(</span><em>resource</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#QueueProgresser.on_new_object"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser.on_new_object" title="Permalink to this definition">¶</a></dt>
<dd><p>Update the status with the new resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>resource</strong> (<a class="reference internal" href="google.cloud.forseti.common.gcp_type.resource.html#google.cloud.forseti.common.gcp_type.resource.Resource" title="google.cloud.forseti.common.gcp_type.resource.Resource"><em>Resource</em></a>) – db row of Resource</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.inventory.QueueProgresser.on_warning">
<code class="descname">on_warning</code><span class="sig-paren">(</span><em>warning</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#QueueProgresser.on_warning"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser.on_warning" title="Permalink to this definition">¶</a></dt>
<dd><p>Stores the warning and updates the counter.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>warning</strong> (<em>str</em>) – warning message</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="function">
<dt id="google.cloud.forseti.services.inventory.inventory.run_import">
<code class="descname">run_import</code><span class="sig-paren">(</span><em>client</em>, <em>model_name</em>, <em>inventory_index_id</em>, <em>background</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#run_import"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.run_import" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the import against an inventory.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>client</strong> (<em>object</em>) – Api client to use.</li>
<li><strong>model_name</strong> (<em>str</em>) – Model name to create.</li>
<li><strong>inventory_index_id</strong> (<em>int64</em>) – Inventory index to source.</li>
<li><strong>background</strong> (<em>bool</em>) – If the import should run in background.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">RPC response object to indicate status.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">object</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="google.cloud.forseti.services.inventory.inventory.run_inventory">
<code class="descname">run_inventory</code><span class="sig-paren">(</span><em>service_config</em>, <em>queue</em>, <em>session</em>, <em>progresser</em>, <em>background</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/inventory.html#run_inventory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.inventory.run_inventory" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the inventory given the environment configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>service_config</strong> (<em>object</em>) – Service configuration.</li>
<li><strong>queue</strong> (<em>object</em>) – Queue to push status updates into.</li>
<li><strong>session</strong> (<em>object</em>) – Database session.</li>
<li><strong>progresser</strong> (<em>object</em>) – Progresser implementation to use.</li>
<li><strong>background</strong> (<em>bool</em>) – whether to run the inventory in background</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">Returns the result of the crawl.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first"><a class="reference internal" href="#google.cloud.forseti.services.inventory.inventory.QueueProgresser" title="google.cloud.forseti.services.inventory.inventory.QueueProgresser">QueueProgresser</a></p>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><p class="first last"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code> – Reraises any exception.</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>

