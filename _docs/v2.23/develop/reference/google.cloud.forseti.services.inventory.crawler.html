---
layout: docs

title: "google.cloud.forseti.services.inventory.crawler module"



hide:
  right_sidebar: true
---
<div class="section" id="module-google.cloud.forseti.services.inventory.crawler">
<span id="google-cloud-forseti-services-inventory-crawler-module"></span><h1>google.cloud.forseti.services.inventory.crawler module<a class="headerlink" href="#module-google.cloud.forseti.services.inventory.crawler" title="Permalink to this headline">¶</a></h1>
<p>Crawler implementation.</p>
<dl class="class">
<dt id="google.cloud.forseti.services.inventory.crawler.Crawler">
<em class="property">class </em><code class="descname">Crawler</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#Crawler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.Crawler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="google.cloud.forseti.services.inventory.base.crawler.html#google.cloud.forseti.services.inventory.base.crawler.Crawler" title="google.cloud.forseti.services.inventory.base.crawler.Crawler"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.forseti.services.inventory.base.crawler.Crawler</span></code></a></p>
<p>Simple single-threaded Crawler implementation.</p>
<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.Crawler.dispatch">
<code class="descname">dispatch</code><span class="sig-paren">(</span><em>callback</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#Crawler.dispatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.Crawler.dispatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispatch crawling of a subtree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>callback</strong> (<em>function</em>) – Callback to dispatch.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.Crawler.get_client">
<code class="descname">get_client</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#Crawler.get_client"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.Crawler.get_client" title="Permalink to this definition">¶</a></dt>
<dd><p>Get the GCP API client.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">GCP API client</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body">object</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.Crawler.on_child_error">
<code class="descname">on_child_error</code><span class="sig-paren">(</span><em>resource_full_name</em>, <em>error</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#Crawler.on_child_error"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.Crawler.on_child_error" title="Permalink to this definition">¶</a></dt>
<dd><p>Process the error generated by child of a resource</p>
<blockquote>
<div>Inventory does not stop for children errors but raise a warning</div></blockquote>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first last simple">
<li><strong>resource_full_name</strong> (<em>str</em>) – The full name of the resource that raised
the error.</li>
<li><strong>error</strong> (<em>str</em>) – error message to handle</li>
</ul>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.Crawler.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>resource</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#Crawler.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.Crawler.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the crawler, given a start resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>resource</strong> (<em>object</em>) – Resource to start with.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The filled progresser described in inventory</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="google.cloud.forseti.services.inventory.inventory.html#google.cloud.forseti.services.inventory.inventory.QueueProgresser" title="google.cloud.forseti.services.inventory.inventory.QueueProgresser">QueueProgresser</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.Crawler.visit">
<code class="descname">visit</code><span class="sig-paren">(</span><em>resource</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#Crawler.visit"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.Crawler.visit" title="Permalink to this definition">¶</a></dt>
<dd><p>Handle a newly found resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>resource</strong> (<em>object</em>) – Resource to handle.</td>
</tr>
<tr class="field-even field"><th class="field-name">Raises:</th><td class="field-body"><code class="xref py py-exc docutils literal notranslate"><span class="pre">Exception</span></code> – Reraises any exception.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.Crawler.write">
<code class="descname">write</code><span class="sig-paren">(</span><em>resource</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#Crawler.write"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.Crawler.write" title="Permalink to this definition">¶</a></dt>
<dd><p>Save resource to storage.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>resource</strong> (<em>object</em>) – Resource to handle.</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.forseti.services.inventory.crawler.CrawlerConfig">
<em class="property">class </em><code class="descname">CrawlerConfig</code><span class="sig-paren">(</span><em>storage</em>, <em>progresser</em>, <em>api_client</em>, <em>variables=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#CrawlerConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.CrawlerConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="google.cloud.forseti.services.inventory.base.crawler.html#google.cloud.forseti.services.inventory.base.crawler.CrawlerConfig" title="google.cloud.forseti.services.inventory.base.crawler.CrawlerConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.forseti.services.inventory.base.crawler.CrawlerConfig</span></code></a></p>
<p>Crawler configuration to inject dependencies.</p>
</dd></dl>

<dl class="class">
<dt id="google.cloud.forseti.services.inventory.crawler.ParallelCrawler">
<em class="property">class </em><code class="descname">ParallelCrawler</code><span class="sig-paren">(</span><em>config</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#ParallelCrawler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.ParallelCrawler" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="#google.cloud.forseti.services.inventory.crawler.Crawler" title="google.cloud.forseti.services.inventory.crawler.Crawler"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.forseti.services.inventory.crawler.Crawler</span></code></a></p>
<p>Multi-threaded Crawler implementation.</p>
<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.ParallelCrawler._process_queue">
<code class="descname">_process_queue</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#ParallelCrawler._process_queue"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.ParallelCrawler._process_queue" title="Permalink to this definition">¶</a></dt>
<dd><p>Process items in the queue until the shutdown event is set.</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.ParallelCrawler._start_workers">
<code class="descname">_start_workers</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#ParallelCrawler._start_workers"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.ParallelCrawler._start_workers" title="Permalink to this definition">¶</a></dt>
<dd><p>Start a pool of worker threads for processing the dispatch queue.</p>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.ParallelCrawler.dispatch">
<code class="descname">dispatch</code><span class="sig-paren">(</span><em>callback</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#ParallelCrawler.dispatch"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.ParallelCrawler.dispatch" title="Permalink to this definition">¶</a></dt>
<dd><p>Dispatch crawling of a subtree.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>callback</strong> (<em>function</em>) – Callback to dispatch.</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.services.inventory.crawler.ParallelCrawler.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>resource</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#ParallelCrawler.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.ParallelCrawler.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the crawler, given a start resource.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><strong>resource</strong> (<a class="reference internal" href="google.cloud.forseti.common.gcp_type.resource.html#google.cloud.forseti.common.gcp_type.resource.Resource" title="google.cloud.forseti.common.gcp_type.resource.Resource"><em>Resource</em></a>) – Resource to start with.</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body">The filled progresser described in inventory</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="google.cloud.forseti.services.inventory.inventory.html#google.cloud.forseti.services.inventory.inventory.QueueProgresser" title="google.cloud.forseti.services.inventory.inventory.QueueProgresser">QueueProgresser</a></td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

<dl class="class">
<dt id="google.cloud.forseti.services.inventory.crawler.ParallelCrawlerConfig">
<em class="property">class </em><code class="descname">ParallelCrawlerConfig</code><span class="sig-paren">(</span><em>storage</em>, <em>progresser</em>, <em>api_client</em>, <em>threads</em>, <em>variables=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#ParallelCrawlerConfig"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.ParallelCrawlerConfig" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <a class="reference internal" href="google.cloud.forseti.services.inventory.base.crawler.html#google.cloud.forseti.services.inventory.base.crawler.CrawlerConfig" title="google.cloud.forseti.services.inventory.base.crawler.CrawlerConfig"><code class="xref py py-class docutils literal notranslate"><span class="pre">google.cloud.forseti.services.inventory.base.crawler.CrawlerConfig</span></code></a></p>
<p>Multithreaded crawler configuration, to inject dependencies.</p>
</dd></dl>

<dl class="function">
<dt id="google.cloud.forseti.services.inventory.crawler._api_client_factory">
<code class="descname">_api_client_factory</code><span class="sig-paren">(</span><em>config</em>, <em>threads</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#_api_client_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler._api_client_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the proper initialized API client based on the configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> (<em>object</em>) – Inventory configuration on server.</li>
<li><strong>threads</strong> (<em>int</em>) – how many threads to use.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The initialized api client implementation class.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Union[<a class="reference internal" href="google.cloud.forseti.services.inventory.base.gcp.html#google.cloud.forseti.services.inventory.base.gcp.ApiClientImpl" title="google.cloud.forseti.services.inventory.base.gcp.ApiClientImpl">gcp.ApiClientImpl</a>, <a class="reference internal" href="google.cloud.forseti.services.inventory.base.cai_gcp_client.html#google.cloud.forseti.services.inventory.base.cai_gcp_client.CaiApiClientImpl" title="google.cloud.forseti.services.inventory.base.cai_gcp_client.CaiApiClientImpl">cai_gcp_client.CaiApiClientImpl</a>]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="google.cloud.forseti.services.inventory.crawler._crawler_factory">
<code class="descname">_crawler_factory</code><span class="sig-paren">(</span><em>storage</em>, <em>progresser</em>, <em>client</em>, <em>parallel</em>, <em>threads</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#_crawler_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler._crawler_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the proper initialized crawler based on the configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>storage</strong> (<em>object</em>) – Storage implementation to use.</li>
<li><strong>progresser</strong> (<em>object</em>) – Progresser to notify status updates.</li>
<li><strong>client</strong> (<em>object</em>) – The API client instance.</li>
<li><strong>parallel</strong> (<em>bool</em>) – If true, use the parallel crawler implementation.</li>
<li><strong>threads</strong> (<em>int</em>) – how many threads to use when running in parallel</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The initialized crawler implementation class.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">Union[<a class="reference internal" href="google.cloud.forseti.services.inventory.base.crawler.html#google.cloud.forseti.services.inventory.base.crawler.Crawler" title="google.cloud.forseti.services.inventory.base.crawler.Crawler">Crawler</a>, <a class="reference internal" href="#google.cloud.forseti.services.inventory.crawler.ParallelCrawler" title="google.cloud.forseti.services.inventory.crawler.ParallelCrawler">ParallelCrawler</a>]</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="google.cloud.forseti.services.inventory.crawler._root_resource_factory">
<code class="descname">_root_resource_factory</code><span class="sig-paren">(</span><em>config</em>, <em>client</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#_root_resource_factory"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler._root_resource_factory" title="Permalink to this definition">¶</a></dt>
<dd><p>Creates the proper initialized crawler based on the configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>config</strong> (<em>object</em>) – Inventory configuration on server.</li>
<li><strong>client</strong> (<em>object</em>) – The API client instance.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The initialized root resource.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="google.cloud.forseti.common.gcp_type.resource.html#google.cloud.forseti.common.gcp_type.resource.Resource" title="google.cloud.forseti.common.gcp_type.resource.Resource">Resource</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="function">
<dt id="google.cloud.forseti.services.inventory.crawler.run_crawler">
<code class="descname">run_crawler</code><span class="sig-paren">(</span><em>storage</em>, <em>progresser</em>, <em>config</em>, <em>parallel=True</em>, <em>threads=10</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/services/inventory/crawler.html#run_crawler"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.services.inventory.crawler.run_crawler" title="Permalink to this definition">¶</a></dt>
<dd><p>Run the crawler with a determined configuration.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>storage</strong> (<em>object</em>) – Storage implementation to use.</li>
<li><strong>progresser</strong> (<em>object</em>) – Progresser to notify status updates.</li>
<li><strong>config</strong> (<em>object</em>) – Inventory configuration on server.</li>
<li><strong>parallel</strong> (<em>bool</em>) – If true, use the parallel crawler implementation.</li>
<li><strong>threads</strong> (<em>int</em>) – how many threads to use when running in parallel.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The progresser implemented in inventory</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last"><a class="reference internal" href="google.cloud.forseti.services.inventory.inventory.html#google.cloud.forseti.services.inventory.inventory.QueueProgresser" title="google.cloud.forseti.services.inventory.inventory.QueueProgresser">QueueProgresser</a></p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</div>

