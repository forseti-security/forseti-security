---
layout: docs

title: "google.cloud.forseti.enforcer.batch_enforcer module"



hide:
  right_sidebar: true
---
<div class="section" id="module-google.cloud.forseti.enforcer.batch_enforcer">
<span id="google-cloud-forseti-enforcer-batch-enforcer-module"></span><h1>google.cloud.forseti.enforcer.batch_enforcer module<a class="headerlink" href="#module-google.cloud.forseti.enforcer.batch_enforcer" title="Permalink to this headline">¶</a></h1>
<p>Manages enforcement of policies for multiple cloud projects in parallel.</p>
<dl class="class">
<dt id="google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer">
<em class="property">class </em><code class="descname">BatchFirewallEnforcer</code><span class="sig-paren">(</span><em>global_configs=None</em>, <em>dry_run=False</em>, <em>concurrent_workers=1</em>, <em>project_sema=None</em>, <em>max_running_operations=0</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/enforcer/batch_enforcer.html#BatchFirewallEnforcer"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer" title="Permalink to this definition">¶</a></dt>
<dd><p>Bases: <code class="xref py py-class docutils literal notranslate"><span class="pre">object</span></code></p>
<p>Manage the parallel enforcement of firewall policies across projects.</p>
<dl class="method">
<dt id="google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer._enforce_project">
<code class="descname">_enforce_project</code><span class="sig-paren">(</span><em>project_id</em>, <em>firewall_policy</em>, <em>prechange_callback=None</em>, <em>add_rule_callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/enforcer/batch_enforcer.html#BatchFirewallEnforcer._enforce_project"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer._enforce_project" title="Permalink to this definition">¶</a></dt>
<dd><p>Enforces the policy on the project.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>project_id</strong> (<em>str</em>) – The project id to enforce.</li>
<li><strong>firewall_policy</strong> (<em>list</em>) – A list of rules which are used to construct a
fe.FirewallRules object of expected rules to enforce.</li>
<li><strong>prechange_callback</strong> (<em>Callable</em>) – See docstring for self.Run().</li>
<li><strong>add_rule_callback</strong> (<em>Callable</em>) – See docstring for self.Run().</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The result proto.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">enforcer_log_pb2.GceFirewallEnforcementResult</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer._enforce_projects">
<code class="descname">_enforce_projects</code><span class="sig-paren">(</span><em>project_policies</em>, <em>prechange_callback=None</em>, <em>new_result_callback=None</em>, <em>add_rule_callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/enforcer/batch_enforcer.html#BatchFirewallEnforcer._enforce_projects"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer._enforce_projects" title="Permalink to this definition">¶</a></dt>
<dd><p>Do a single enforcement run on the projects.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>project_policies</strong> (<em>iterable</em>) – An iterable of
(project_id, firewall_policy) tuples to enforce.</li>
<li><strong>prechange_callback</strong> (<em>Callable</em>) – See docstring for self.Run().</li>
<li><strong>new_result_callback</strong> (<em>Callable</em>) – See docstring for self.Run().</li>
<li><strong>add_rule_callback</strong> (<em>Callable</em>) – See docstring for self.Run().</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The number of projects that were enforced.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">int</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer._summarize_results">
<code class="descname">_summarize_results</code><span class="sig-paren">(</span><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/enforcer/batch_enforcer.html#BatchFirewallEnforcer._summarize_results"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer._summarize_results" title="Permalink to this definition">¶</a></dt>
<dd><p>Parse enforcement results into the BatchResult summary proto.</p>
</dd></dl>

<dl class="attribute">
<dt id="google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer.compute_client">
<code class="descname">compute_client</code><a class="headerlink" href="#google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer.compute_client" title="Permalink to this definition">¶</a></dt>
<dd><p>A thread local instance of compute.ComputeClient.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Returns:</th><td class="field-body">A Compute API client instance.</td>
</tr>
<tr class="field-even field"><th class="field-name">Return type:</th><td class="field-body"><a class="reference internal" href="google.cloud.forseti.common.gcp_api.compute.html#google.cloud.forseti.common.gcp_api.compute.ComputeClient" title="google.cloud.forseti.common.gcp_api.compute.ComputeClient">compute.ComputeClient</a></td>
</tr>
</tbody>
</table>
</dd></dl>

<dl class="method">
<dt id="google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer.run">
<code class="descname">run</code><span class="sig-paren">(</span><em>project_policies</em>, <em>prechange_callback=None</em>, <em>new_result_callback=None</em>, <em>add_rule_callback=None</em><span class="sig-paren">)</span><a class="reference internal" href="_modules/google/cloud/forseti/enforcer/batch_enforcer.html#BatchFirewallEnforcer.run"><span class="viewcode-link">[source]</span></a><a class="headerlink" href="#google.cloud.forseti.enforcer.batch_enforcer.BatchFirewallEnforcer.run" title="Permalink to this definition">¶</a></dt>
<dd><p>Runs the enforcer over all projects passed in to the function.</p>
<table class="docutils field-list" frame="void" rules="none">
<col class="field-name" />
<col class="field-body" />
<tbody valign="top">
<tr class="field-odd field"><th class="field-name">Parameters:</th><td class="field-body"><ul class="first simple">
<li><strong>project_policies</strong> (<em>iterable</em>) – An iterable of
(project_id, firewall_policy) tuples to enforce or a dictionary
in the format {project_id: firewall_policy}</li>
<li><strong>prechange_callback</strong> (<em>Callable</em>) – <p>A callback function that will get
called if the firewall policy for a project does not match the
expected policy, before any changes are actually applied. If the
callback returns False then no changes will be made to the
project. If it returns True then the changes will be pushed.</p>
<p>See FirewallEnforcer.apply_firewall() docstring for more details.</p>
</li>
<li><strong>new_result_callback</strong> (<em>Callable</em>) – An optional function to call with each
new result proto message as they are returned from a
ProjectEnforcer thread.</li>
<li><strong>add_rule_callback</strong> (<em>Callable</em>) – A callback function that checks whether
a firewall rule should be applied. If the callback returns False,
that rule will not be modified.</li>
</ul>
</td>
</tr>
<tr class="field-even field"><th class="field-name">Returns:</th><td class="field-body"><p class="first">The EnforcerLog proto for the last run,
including individual results for each project, and a summary of all
results.</p>
</td>
</tr>
<tr class="field-odd field"><th class="field-name">Return type:</th><td class="field-body"><p class="first last">enforcer_log_pb2.EnforcerLog</p>
</td>
</tr>
</tbody>
</table>
</dd></dl>

</dd></dl>

</div>

